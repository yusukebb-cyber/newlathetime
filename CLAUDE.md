# 旋盤タイム（Lathe Time）

## プロジェクト概要
「旋盤タイム」は旋盤作業の加工時間を測定し管理するためのWebアプリです。PWA（Progressive Web App）として動作し、モバイルデバイスでもデスクトップでも使用可能です。作業者は図面番号、作業内容、数量などの情報と共に作業時間を記録し、後で分析することができます。

## 主な機能
- 作業時間の測定（開始、一時停止、停止）
- 図面番号を含む作業情報の記録（図面番号、作業内容、数量、メモ）
- Google Cloud Vision APIを使用した画像からの図面番号読み取り機能
- 過去の作業記録の閲覧とフィルタリング
- 詳細な作業レポート（合計作業時間、総数量、図面枚数など）
- データのCSVエクスポート機能
- バックアップと復元機能
- ライト/ダークテーマ切り替え
- PWA対応（オフライン使用可能）
- ブラウザが閉じられた場合の作業状態自動保存機能

## UI構成
- タイマー画面: 作業時間測定と情報入力
- レポート画面: 過去の作業データ閲覧と分析
- 設定画面: アプリ設定、データ管理、API設定

## 技術スタック
- フロントエンド: HTML, CSS, JavaScript（vanilla）
- バックエンド: Node.js, Express（静的ファイル配信用）
- データストレージ: ブラウザのLocalStorage
- API連携: Google Cloud Vision API（図面番号の読み取り用）
- PWA: Service Worker, Manifest

## ファイル構成
- `server.js` - 基本的なExpressサーバー（静的ファイル配信用）
- `docs/` - 静的Webアプリのメインディレクトリ
  - `js/app.js` - メインのアプリケーションロジック
  - `js/vision-api.js` - Google Cloud Vision API連携機能
  - `css/styles.css` - スタイルシート（ライト/ダークテーマ対応）
  - `index.html` - メインのHTMLファイル
  - `service-worker.js` - PWA用のService Worker
  - `manifest.json` - PWAマニフェスト
  - `images/` - アイコンや画像ファイル

## 特徴的な実装
- レスポンシブデザイン（モバイル/デスクトップ両対応）
- 図面番号の画像読み取り機能（Vision API連携）
- 日付範囲と図面番号によるフィルタリング
- 詳細な集計データ（合計時間、平均時間、総数量など）
- WakeLock API対応（測定中の画面スリープ防止）
- システムテーマに合わせた自動ダークモード切替
- ブラウザ再起動後も作業を継続できる状態保存機能

## 開発環境セットアップ
```
npm install
npm run dev
```

## ローカルでの実行
```
npm start
```
サーバーが起動し、`http://localhost:3000` でアプリにアクセスできます。